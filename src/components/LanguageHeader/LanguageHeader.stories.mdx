import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks';
import { InputLabel, TextField, Textarea } from '@acpaas-ui/react-components';
import { Formik, Field } from 'formik';
import { useState } from 'react';
import { LANGUAGE_HEADER_MOCK_LANGUAGES, LANGUAGE_HEADER_MOCK_TOOLTIP, INITIAL_VALUES_MOCK} from './LanguageHeader.mock';
import LanguageHeader from './LanguageHeader';
import MultilanguageField from '../MultilanguageField/MultilanguageField';

<Meta title="LanguageHeader" component={LanguageHeader} />

# Language Header

The language header can be used as a language selector on top of a form.

## Preview of component

<Preview>
	<Story name='Base'>
		{() => {
			const [activeLanguage, setActiveLanguage] = useState(LANGUAGE_HEADER_MOCK_LANGUAGES[1]);
			const languages = LANGUAGE_HEADER_MOCK_LANGUAGES;
			const onSave = (newValue) => {
				console.log(newValue);
			};
			const onChange = (newValue) => {
				console.log('change', newValue);
			};
			return (
				<LanguageHeader
					className="u-margin"
					languages={LANGUAGE_HEADER_MOCK_LANGUAGES}
					activeLanguage={activeLanguage}
					tooltipText={LANGUAGE_HEADER_MOCK_TOOLTIP}
					onChangeLanguage={setActiveLanguage}>
					<div className="u-margin-top">
						<Formik
							onSubmit={onSave}
							initialValues={INITIAL_VALUES_MOCK}>
							{({ errors, submitForm, values, resetForm, setFieldValue }) => {
								onChange(values);
								return (
									<div>
										<div className="row u-margin-bottom">
											<div className="col-xs-12">
												<Field as={TextField} label="Titel" name="title"/>
											</div>
										</div>
										<div className="row u-margin-bottom">
											<div className="col-xs-12">
												<MultilanguageField
													as={Textarea}
													label="Omschrijving"
													name="description"
													value={values.description}
													setFieldValue={setFieldValue}
													languages={LANGUAGE_HEADER_MOCK_LANGUAGES}
													activeLanguage={activeLanguage}/>
											</div>
										</div>
									</div>
								)
							}}
						</Formik>
					</div>
				</LanguageHeader>
			)
		}}
	</Story>
</Preview>

## Props

<Props of={LanguageHeader} />
